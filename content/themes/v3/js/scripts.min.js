/* big-andy.co.uk - v3.2.0 - 2012-11-15
* http://big-andy.co.uk
* Copyright (c) 2012 Your Company; Licensed MIT */
(function(){var e={kitId:"bhs0nmm",scriptTimeout:3e3},t=document.getElementsByTagName("html")[0];t.className+=" js wf-loading";var n=setTimeout(function(){t.className=t.className.replace(/(\s|^)wf-loading(\s|$)/g," "),t.className+=" wf-inactive"},e.scriptTimeout),r=document.createElement("script"),i=!1;r.src="//use.typekit.net/"+e.kitId+".js",r.type="text/javascript",r.async="true",r.onload=r.onreadystatechange=function(){var t=this.readyState;if(i||t&&t!="complete"&&t!="loaded")return;i=!0,clearTimeout(n);try{Typekit.load(e)}catch(r){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(r,s)})();var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-6954334-3"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var JQLBSettings={fitToScreen:"1",resizeSpeed:"400",displayDownloadLink:"0",navbarOnTop:"0",loopImages:"",resizeCenter:"",marginSize:"0",linkTarget:"_self",help:"",prevLinkTitle:"previous image",nextLinkTitle:"next image",prevLinkText:"« Previous",nextLinkText:"Next »",closeTitle:"close image gallery",image:"Image ",of:" of ",download:"Download"};(function(e){e.fn.lightbox=function(t){function r(){return s(),c(this),!1}function s(){e(window).bind("orientationchange",o),e(window).bind("resize",o),e("#overlay").remove(),e("#lightbox").remove(),n.isIE8=f(),n.inprogress=!1;if(n.jsonData&&n.jsonData.length>0){var t=n.jsonDataParser?n.jsonDataParser:e.fn.lightbox.parseJsonData;n.imageArray=[],n.imageArray=t(n.jsonData)}var r='<div id="outerImageContainer"><div id="imageContainer"><iframe id="lightboxIframe" /><img id="lightboxImage"><div id="hoverNav"><a href="javascript://" title="'+n.strings.prevLinkTitle+'" id="prevLink"></a><a href="javascript://" id="nextLink" title="'+n.strings.nextLinkTitle+'"></a></div><div id="loading"><a href="javascript://" id="loadingLink"><div id="jqlb_loading"></div></a></div></div></div>',i='<div id="imageDataContainer" class="clearfix"><div id="imageData"><div id="imageDetails"><span id="caption"></span><span id="numberDisplay"></span></div><div id="bottomNav">';n.displayHelp&&(i+='<span id="helpDisplay">'+n.strings.help+"</span>"),i+='<a href="javascript://" id="bottomNavClose" title="'+n.strings.closeTitle+'"><div id="jqlb_closelabel"></div></a></div></div></div>';var s;n.navbarOnTop?(s='<div id="overlay"></div><div id="lightbox">'+i+r+"</div>",e("body").append(s),e("#imageDataContainer").addClass("ontop")):(s='<div id="overlay"></div><div id="lightbox">'+r+i+"</div>",e("body").append(s)),e("#overlay").click(function(){E()}).hide(),e("#lightbox").click(function(){E()}).hide(),e("#loadingLink").click(function(){return E(),!1}),e("#bottomNavClose").click(function(){return E(),!1}),e("#outerImageContainer").width(n.widthCurrent).height(n.heightCurrent),e("#imageDataContainer").width(n.widthCurrent),n.imageClickClose||(e("#lightboxImage").click(function(){return!1}),e("#hoverNav").click(function(){return!1}))}function o(e){n.resizeTimeout&&(clearTimeout(n.resizeTimeout),n.resizeTimeout=!1),n.resizeTimeout=setTimeout(function(){v(!1)},50)}function u(){var t=e(document).height();n.isIE8&&t>4096&&(t=4096);var r=e(window).height()-n.adminBarHeight;return new Array(e(document).width(),t,e(window).width(),r,e(document).height())}function f(){var e=!1;if(document.createElement){var t=document.createElement("div");t&&t.querySelectorAll&&(t.innerHTML='<object><param name=""></object>',e=t.querySelectorAll("param").length!=1),t=null}return e}function l(){var t=0,r=0;return self.pageYOffset?(r=self.pageYOffset,t=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(r=document.documentElement.scrollTop,t=document.documentElement.scrollLeft):document.body&&(r=document.body.scrollTop,t=document.body.scrollLeft),n.adminBarHeight&&parseInt(e("#wpadminbar").css("top"),10)===0&&(r+=n.adminBarHeight),new Array(t,r)}function c(t){e("select, embed, object").hide();var r=u(),s=l(),o=0;e("#overlay").hide().css({width:r[0]+"px",height:r[1]+"px",opacity:n.overlayOpacity}).fadeIn(400),n.isIE8&&r[1]==4096&&s[1]>=1e3&&(o=s[1]-1e3,r[4]-(s[1]+3096)<0&&(o-=s[1]+3096-r[4]),e("#overlay").css({top:o+"px"})),imageNum=0;if(!n.jsonData){n.imageArray=[];if(!t.rel||t.rel==""){var f="";t.title?f=t.title:e(this).children(":first-child").attr("title")&&(f=e(this).children(":first-child").attr("title")),n.imageArray.push(new Array(t.href,n.displayTitle?f:""))}else e("a").each(function(){if(this.href&&this.rel==t.rel){var r="",i="",s="",o=e(this);this.title?r=this.title:o.children("img:first-child").attr("title")&&(r=o.children("img:first-child").attr("title"));if(o.parent().next(".gallery-caption").html()){var u=o.parent().next(".gallery-caption");i=u.html(),s=u.text()}else o.next(".wp-caption-text").html()&&(i=o.next(".wp-caption-text").html(),s=o.next(".wp-caption-text").text());r=e.trim(r),s=e.trim(s),r.toLowerCase()==s.toLowerCase()&&(r=i,i="");var f="";r!=""&&(f='<span id="titleText">'+r+"</span>"),i!=""&&(r!=""&&(f+="<br />"),f+='<span id="captionText">'+i+"</span>"),n.imageArray.push(new Array(this.href,n.displayTitle?f:""))}})}if(n.imageArray.length>1){for(i=0;i<n.imageArray.length;i++)for(j=n.imageArray.length-1;j>i;j--)n.imageArray[i][0]==n.imageArray[j][0]&&n.imageArray.splice(j,1);while(n.imageArray[imageNum][0]!=t.href)imageNum++}h(s[1],s[0]).show(),p(imageNum)}function h(t,r){return n.resizeSpeed>0?(e("#lightbox").animate({top:t},250,"linear"),e("#lightbox").animate({left:r},250,"linear")):e("#lightbox").css({top:t+"px",left:r+"px"})}function p(t){n.inprogress==0&&(n.inprogress=!0,n.activeImage=t,e("#loading").show(),e("#lightboxImage").hide(),e("#hoverNav").hide(),e("#prevLink").hide(),e("#nextLink").hide(),d())}function d(){n.imgPreloader=new Image,n.imgPreloader.onload=function(){e("#lightboxImage").attr("src",n.imageArray[n.activeImage][0]),v(),y()},n.imgPreloader.src=n.imageArray[n.activeImage][0]}function v(){if(!n.imgPreloader)return;var t=n.imgPreloader.width,r=n.imgPreloader.height,i=u(),s=i[2]<i[0]?i[0]:i[2];e("#overlay").css({width:s+"px",height:i[1]+"px"});var o=i[3]-(e("#imageDataContainer").height()+2*n.borderSize),f=i[2]-2*n.borderSize;if(n.fitToScreen){var c=o-n.marginSize,h=f-n.marginSize,p=1;r>c&&(p=c/r),t*=p,r*=p,p=1,t>h&&(p=h/t),t=Math.round(t*p),r=Math.round(r*p)}var d=l(),v=d[1]+o*.5,g=v-r*.5,y=d[0];e("#lightboxImage").width(t).height(r),m(t,r,g,y)}function m(t,r,i,s){n.widthCurrent=e("#outerImageContainer").outerWidth(),n.heightCurrent=e("#outerImageContainer").outerHeight();var o=Math.max(350,t+n.borderSize*2),u=r+n.borderSize*2;n.xScale=o/n.widthCurrent*100,n.yScale=u/n.heightCurrent*100,h(i,s),b(),e("#imageDataContainer").animate({width:o},n.resizeSpeed,"linear"),e("#outerImageContainer").animate({width:o},n.resizeSpeed,"linear",function(){e("#outerImageContainer").animate({height:u},n.resizeSpeed,"linear",function(){g()})}),w(),e("#prevLink").height(r),e("#nextLink").height(r)}function g(){e("#imageData").show(),e("#caption").show(),e("#loading").hide(),n.resizeSpeed>0?e("#lightboxImage").fadeIn("fast"):e("#lightboxImage").show(),n.inprogress=!1}function y(){n.loopImages&&n.imageArray.length>1?(preloadNextImage=new Image,preloadNextImage.src=n.imageArray[n.activeImage==n.imageArray.length-1?0:n.activeImage+1][0],preloadPrevImage=new Image,preloadPrevImage.src=n.imageArray[n.activeImage==0?n.imageArray.length-1:n.activeImage-1][0]):(n.imageArray.length-1>n.activeImage&&(preloadNextImage=new Image,preloadNextImage.src=n.imageArray[n.activeImage+1][0]),n.activeImage>0&&(preloadPrevImage=new Image,preloadPrevImage.src=n.imageArray[n.activeImage-1][0]))}function b(){e("#numberDisplay").html(""),e("#caption").html("").hide(),n.imageArray[n.activeImage][1]&&e("#caption").html(n.imageArray[n.activeImage][1]).show();var t="",r="",i=n.imageArray.length>1?n.strings.image+(n.activeImage+1)+n.strings.of+n.imageArray.length:"",s=n.displayDownloadLink?'<a href="'+n.imageArray[n.activeImage][0]+'" id="downloadLink" target="'+n.linkTarget+'">'+n.strings.download+"</a>":"",o="";if(n.imageArray.length>1&&!n.disableNavbarLinks){if(n.activeImage>0||n.loopImages)r='<a title="'+n.strings.prevLinkTitle+'" href="#" id="prevLinkText">'+n.strings.prevLinkText+"</a>";if(n.activeImage+1<n.imageArray.length||n.loopImages)o+='<a title="'+n.strings.nextLinkTitle+'" href="#" id="nextLinkText">'+n.strings.nextLinkText+"</a>"}t=r+t+i+s+o,t!=""&&e("#numberDisplay").html(t).show()}function w(){n.imageArray.length>1&&(e("#hoverNav").show(),n.loopImages?(e("#prevLink,#prevLinkText").show().click(function(){return p(n.activeImage==0?n.imageArray.length-1:n.activeImage-1),!1}),e("#nextLink,#nextLinkText").show().click(function(){return p(n.activeImage==n.imageArray.length-1?0:n.activeImage+1),!1})):(n.activeImage!=0&&e("#prevLink,#prevLinkText").show().click(function(){return p(n.activeImage-1),!1}),n.activeImage!=n.imageArray.length-1&&e("#nextLink,#nextLinkText").show().click(function(){return p(n.activeImage+1),!1})),x())}function E(){T(),e("#lightbox").hide(),e("#overlay").fadeOut(),e("select, object, embed").show()}function S(e){var t=e.data.opts,r=e.keyCode,i=27,s=String.fromCharCode(r).toLowerCase();if(s=="x"||s=="o"||s=="c"||r==i)E();else if(s=="p"||r==37)t.loopImages?(T(),p(t.activeImage==0?t.imageArray.length-1:t.activeImage-1)):t.activeImage!=0&&(T(),p(t.activeImage-1));else if(s=="n"||r==39)n.loopImages?(T(),p(t.activeImage==t.imageArray.length-1?0:t.activeImage+1)):t.activeImage!=t.imageArray.length-1&&(T(),p(t.activeImage+1));return!1}function x(){e(document).bind("keydown",{opts:n},S)}function T(){e(document).unbind("keydown")}var n=e.extend({},e.fn.lightbox.defaults,t);return parseFloat(e().jquery)>=1.7?e(this).on("click",r):e(this).live("click",r)},e.fn.lightbox.parseJsonData=function(t){var n=[];return e.each(t,function(){n.push(new Array(this.url,this.title))}),n},e.fn.lightbox.defaults={adminBarHeight:28,overlayOpacity:.8,borderSize:10,imageArray:new Array,activeImage:null,inprogress:!1,widthCurrent:250,heightCurrent:250,xScale:1,yScale:1,displayTitle:!0,disableNavbarLinks:!0,loopImages:!0,imageClickClose:!0,jsonData:null,jsonDataParser:null,followScroll:!1,isIE8:!1},e(document).ready(function(e){var t=typeof JQLBSettings=="object";t&&JQLBSettings.resizeSpeed&&(JQLBSettings.resizeSpeed=parseInt(JQLBSettings.resizeSpeed)),t&&JQLBSettings.marginSize&&(JQLBSettings.marginSize=parseInt(JQLBSettings.marginSize));var n={help:" Browse images with your keyboard: Arrows or P(revious)/N(ext) and X/C/ESC for close.",prevLinkTitle:"previous image",nextLinkTitle:"next image",prevLinkText:"&laquo; Previous",nextLinkText:"Next &raquo;",closeTitle:"close image gallery",image:"Image ",of:" of ",download:"Download"};e('a[rel^="lightbox"]').lightbox({adminBarHeight:e("#wpadminbar").height()||0,linkTarget:t&&JQLBSettings.linkTarget.length?JQLBSettings.linkTarget:"_self",displayHelp:t&&JQLBSettings.help.length?!0:!1,marginSize:t&&JQLBSettings.marginSize?JQLBSettings.marginSize:0,fitToScreen:t&&JQLBSettings.fitToScreen=="1"?!0:!1,resizeSpeed:t&&JQLBSettings.resizeSpeed>=0?JQLBSettings.resizeSpeed:400,displayDownloadLink:t&&JQLBSettings.displayDownloadLink=="0"?!1:!0,navbarOnTop:t&&JQLBSettings.navbarOnTop=="0"?!1:!0,strings:t&&typeof JQLBSettings.help=="string"?JQLBSettings:n})})})(jQuery),jQuery(document).ready(function(e){e(".top-nav").before('<a href="#" class="menu-trigger"><i>Menu</i></a>'),e(".menu-trigger").click(function(){e(".top-nav").toggleClass("is-open")});var t=e(window).width();t>=768&&e(".comment img[data-gravatar]").each(function(){e(this).attr("src",e(this).attr("data-gravatar"))})});